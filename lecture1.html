<!DOCTYPE html>
<html lang="en"><head>
<script src="lecture1_files/libs/clipboard/clipboard.min.js"></script>
<script src="lecture1_files/libs/quarto-html/tabby.min.js"></script>
<script src="lecture1_files/libs/quarto-html/popper.min.js"></script>
<script src="lecture1_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="lecture1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lecture1_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="lecture1_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <title>lecture1</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="lecture1_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="lecture1_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="lecture1_files/libs/revealjs/dist/theme/quarto-472d93dbcd736c42abccb1b382b75a71.css">
  <link href="lecture1_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="lecture1_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="lecture1_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="lecture1_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section>
<section id="welcome-to-r-math-camp" class="title-slide slide level1 center">
<h1>Welcome to R Math Camp</h1>
<p>Bradley Katcher</p>
<p><br><br></p>
<p>Note: I am grateful to Rony Rodriguez-Ramirez and previous Math Camp and API-209 TFs for their materials, of which these are heavily based.</p>
</section>
<section id="about-me" class="slide level2">
<h2>About me:</h2>
<p>Bradley Katcher <img data-src="IMG_4201.png" class="absolute" style="top: -25px; left: 800px; width: 350px; height: 300px; "></p>
<ul>
<li><p>3rd year PhD student at HKS (Econ track)</p>
<ul>
<li>From Cleveland, Ohio</li>
<li>Worked at the Federal Reserve in Washington, DC</li>
<li>Did my MPP and MS Data Science at University of Virginia</li>
</ul></li>
<li><p>Big sports fan, enjoy cooking, running, hiking, travel, home brewing, and economics!</p></li>
<li><p>Will be the Teaching Fellow (TF) for API-209 this semester</p></li>
</ul>
</section>
<section id="my-research-assistant" class="slide level2">
<h2>My Research Assistant:</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Meet Bee!</p>
<p>If we are on a Zoom call, you may hear her in the background. She’s very chatty!</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="./images/bee.png"></p>
<figcaption>Bee</figcaption>
</figure>
</div>
</div></div>
</section>
<section id="introduce-course-assistants" class="slide level2">
<h2>Introduce Course Assistants:</h2>
<p>CAs, please give:</p>
<ol type="1">
<li>Your name</li>
<li>Favorite tip for learning R</li>
<li>Recommendation of at least one non-academic thing to do this semester in Boston/Cambridge.</li>
</ol>
</section>
<section id="goals-for-the-course" class="slide level2">
<h2>Goals for the course:</h2>
<ul>
<li><p>Ensure that you know enough R to tackle assignments this semester.</p>
<ul>
<li><p>Will not teach you everything about coding: this is a public policy program, not a CS course.</p></li>
<li><p>Goal is to bring everyone to a similar playing field!</p>
<ul>
<li>May be a little slow for experienced R users</li>
<li>May be fast for those of you who have never programmed.</li>
<li>Feedback is encouraged!</li>
</ul></li>
</ul></li>
<li><p>Know how to craft questions and where to look for answers.</p></li>
</ul>
</section>
<section id="why-r" class="slide level2">
<h2>Why R?</h2>
<ul>
<li><p>Allows you to connect theory to empirics (data!)</p></li>
<li><p>Open source, large community, and used by lots of organizations</p>
<ul>
<li><p>More reproducible and systematic than using Excel</p>
<ul>
<li>I used it when working for the Fed</li>
</ul></li>
</ul></li>
<li><p>Produces very nice data visualizations</p></li>
</ul>
</section>
<section id="i-dont-want-to-waste-your-time" class="slide level2">
<h2>I don’t want to waste your time:</h2>
<ul>
<li><p>Many of you have substantial R experience</p></li>
<li><p>This course might be too fast/slow for some of you</p></li>
<li><p>Can’t force you to be here!</p></li>
<li><p>Reasons why you might still want to be, even if you are an experienced user:</p>
<ul>
<li><p>Good refresher</p></li>
<li><p>Build out your GitHub Repo</p>
<ul>
<li>Can offer a session on this if interested</li>
</ul></li>
<li><p>Will be using exercises that are based on problem sets/exams from API-209</p></li>
</ul></li>
</ul>
</section>
<section id="where-to-turn-for-help" class="slide level2">
<h2>Where to turn for help:</h2>
<ul>
<li><a href="https://r4ds.had.co.nz/index.html">R for Data Science</a></li>
<li><a href="https://posit.cloud/learn/recipes">Posit Recipes</a></li>
<li>Google</li>
<li>ChatGPT/AI</li>
<li>Course Assistants</li>
<li>Me!</li>
</ul>
</section>
<section id="layout-of-course" class="slide level2">
<h2>Layout of course:</h2>
<p>What are we doing to do during Math Camp (R portion)?</p>
<p>8 sessions over the next two weeks:</p>
<p>1. <strong>4 Lessons (2 hours):</strong></p>
<ul>
<li>I will discuss coding strategies and implementations. Mostly walk-through of examples.</li>
</ul>
<p>2. <strong>Labs (1.5 hours):</strong></p>
<ul>
<li><p>A hands-on session where I provide you with a challenge and we solve them together.</p></li>
<li><p>A chance to practice the skills we learn in lessons.</p></li>
</ul>
<p>3. <strong>Office hours</strong> (optional!)</p>
</section>
<section id="classroom-norms" class="slide level2">
<h2>Classroom Norms:</h2>
<ul>
<li><p>Everyone deserves the chance to contribute</p></li>
<li><p>Start with curiosity, not judgement</p></li>
<li><p>Acknowledge varying levels of experience</p></li>
<li><p>Practice collaborative problem solving</p></li>
<li><p>Ask questions, often! No such thing as a “dumb question”</p></li>
<li><p>Attempt first, then seek input</p></li>
<li><p>Keep feedback constructive and kind</p></li>
<li><p>Stay present and engaged</p></li>
<li><p>Use tools and online resources appropriately</p></li>
<li><p>Respect everyone’s time and energy</p></li>
</ul>
</section>
<section id="ai-for-troubleshooting" class="slide level2">
<h2>AI for Troubleshooting:</h2>
<p>To use AI effectively, consider the following:</p>
<ol type="1">
<li>Share a <em>clear question</em> with your <em>code + error message</em></li>
<li>Ask for help identifying the error</li>
<li>Review the AI’s suggestion <strong>critically and make sure you understand the fix</strong></li>
<li>Always <strong>test solutions</strong> in your own R environment</li>
</ol>
<p>Cite when you use AI for troubleshooting, and any code written by AI should include a comment by you describing which AI you used and what the code does in your own words.</p>
</section>
<section id="dont-let-ai-do-the-thinking-for-you" class="slide level2">
<h2>Don’t let AI do the thinking for you:</h2>
<p>AI gives answers, but you need a deeper understanding.</p>
<ul>
<li><p>You can’t debug or adapt code you don’t understand.</p>
<ul>
<li>Knowing <em>how</em> matters more than getting a quick fix.</li>
</ul></li>
</ul>
<p>AI isn’t always correct:</p>
<ul>
<li><p>Makes up functions</p></li>
<li><p>Suggests outdated/inefficient code</p></li>
<li><p>Doesn’t know dataset or context</p></li>
</ul>
</section>
<section id="outline" class="slide level2">
<h2>Outline:</h2>
<ul>
<li><p>Lesson 1: Welcome, overview, dplyr</p>
<ul>
<li>Lab 1: Working with a dataset on how to compute summary stats, basic data analysis</li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li><p>Lesson 2: Installing R, Tidyerse, ggplot, working with other packages</p>
<ul>
<li>Lab 2: Tidy Data and Visualization in R using packages</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><p>Lesson 3: Writing your own functions, Quarto</p>
<ul>
<li>Lab 3: Writing functions to calculate some statistics</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><p>Lesson 4: Data wrangling with multiple datasets, merging and integrating multiple data sources</p>
<ul>
<li>Lab 4: Exercise based on first half of problem set 1</li>
</ul></li>
</ul>
</div>
</section>
<section id="goals-for-today" class="slide level2">
<h2>Goals for today:</h2>
<div class="fragment">
<ol type="1">
<li>Learn how to import data and do basic data manipulation and cleaning.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li>Work with a real dataset, understanding code book and documentation</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Learn key components of the tidyverse.</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li>Understanding data cleaning and data wrangling.</li>
</ol>
<p><img data-src="https://pbs.twimg.com/media/Eb63HKNXYAAS-ik.jpg" width="325"></p>
</div>
</section></section>
<section>
<section id="getting-started" class="title-slide slide level1 center">
<h1>Getting Started</h1>

</section>
<section id="steps-to-working-with-data-in-r" class="slide level2">
<h2>Steps to working with data in R:</h2>
<p>1. Import (<code>read.csv()</code> is your friend)</p>
<div class="fragment">
<p>2. Tidy (<code>dplyr</code> and <code>stringr</code> are your friends)</p>
</div>
<div class="fragment">
<p>3. Transform the data (<code>tidyverse</code> is your friend)</p>
</div>
<div class="fragment">
<p>4. Visualize the data (<code>ggplot</code> is your friend)</p>
</div>
<div class="fragment">
<p>5. Communicate the data (<code>quarto</code> is your friend)</p>
</div>
</section>
<section id="structure-of-an-r-file" class="slide level2">
<h2>Structure of an R file:</h2>
<p>We begin by writing a preamble and loading in packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="co"># filename.do</span></span>
<span id="cb1-2"><a href=""></a><span class="co"># Author: Bradley Katcher</span></span>
<span id="cb1-3"><a href=""></a><span class="co"># Date: </span></span>
<span id="cb1-4"><a href=""></a><span class="co"># Purpose: </span></span>
<span id="cb1-5"><a href=""></a><span class="co"># Description:</span></span>
<span id="cb1-6"><a href=""></a></span>
<span id="cb1-7"><a href=""></a></span>
<span id="cb1-8"><a href=""></a><span class="co"># packages:</span></span>
<span id="cb1-9"><a href=""></a><span class="co"># to install packages, we use the following function:</span></span>
<span id="cb1-10"><a href=""></a><span class="co">#install.packages('dplyr') # you only need to do this once</span></span>
<span id="cb1-11"><a href=""></a><span class="fu">library</span>(dplyr) <span class="co"># this calls the package, you need to do this every time</span></span>
<span id="cb1-12"><a href=""></a></span>
<span id="cb1-13"><a href=""></a><span class="co"># storing key variables:</span></span>
<span id="cb1-14"><a href=""></a></span>
<span id="cb1-15"><a href=""></a></span>
<span id="cb1-16"><a href=""></a></span>
<span id="cb1-17"><a href=""></a><span class="co"># begin analysis</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reading-in-data" class="slide level2">
<h2>Reading in data:</h2>
<p>Ideally most data that you get will be in csv (delimited) format.</p>
<ul>
<li>You had experience reading in csv files in the summer work using the <code>read_csv()</code> command.</li>
</ul>
<p>For today’s exercise, we are going to work with a dataset on the global diffusion of latent nuclear capabilities, produced by Matthew Fuhrmann:</p>
<p>Check out his website <a href="http://www.matthewfuhrmann.com/datasets.html">here</a> with <a href="http://www.matthewfuhrmann.com/uploads/2/5/8/2/25820564/nl_dataset_-_codebook_2015-1215.pdf">codebook</a>.</p>
</section>
<section id="reading-in-data-1" class="slide level2">
<h2>Reading in data:</h2>
<p>It looks like this dataset is in xlsx format. To read that in, we will 1. Install the <code>openxlsx</code> package 2. Call the <code>openxlsx</code> package 3. Read in the dataset</p>
<ul>
<li>There are multiple ways to do this. For example, you could download the file and use the <code>readxl</code> package.</li>
<li>You can load multiple datasets into R.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="co">#install.packages('openxlsx')</span></span>
<span id="cb2-2"><a href=""></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb2-3"><a href=""></a></span>
<span id="cb2-4"><a href=""></a>full_nuclear_data <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="st">'http://www.matthewfuhrmann.com/uploads/2/5/8/2/25820564/nl_dataset_v.1.2.xlsx'</span>)</span>
<span id="cb2-5"><a href=""></a></span>
<span id="cb2-6"><a href=""></a>nuclear_country_year <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="st">'http://www.matthewfuhrmann.com/uploads/2/5/8/2/25820564/country-year_dataset.xlsx'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preview-the-data" class="slide level2">
<h2>Preview the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-2"><a href=""></a></span>
<span id="cb3-3"><a href=""></a><span class="co"># Look at the full data:</span></span>
<span id="cb3-4"><a href=""></a><span class="fu">head</span>(full_nuclear_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country_name ccode                        facility_name facility_ambiguity
1      Algeria   615     Hot cell facility at Ain Oussera                  0
2    Argentina   160    Ezeiza – SF Reprocessing Facility                  0
3    Argentina   160 Ezeiza II – SF Reprocessing Facility                -77
4    Argentina   160     Pilcaniyeu Enrichment Facility I                  0
5    Argentina   160    Pilcaniyeu Enrichment Facility II                -77
6    Australia   900                        Lucas Heights                  0
  enr_type size construction_start construction_end operation_start
1        1    1               1986             1992            1992
2        1    1               1968             1968            1968
3        1    2               1978             1990            9999
4        2    2               1979             1987            1987
5        2    2               2000             9999            9999
6        3    1               1965             1972            1972
  operation_end operation2_start operation2_end covert iaea regional military
1          7777               NA             NA      1    1        0        0
2          1973               NA             NA      0    0        0        0
3          9999               NA             NA      0    0        1        0
4          1994               NA             NA      1    0        1        1
5          9999               NA             NA      0    1        1        0
6          1983               NA             NA      0    1        0        0
  military_ambiguity multinational foreign_assistance
1                  1             0                  1
2                  1             0                  0
3                  0             0                  0
4                  0             0                  0
5                  0             0                  0
6                  1             0                  0
  foreign_assistance_ambiguity
1                            0
2                            1
3                            1
4                            1
5                            1
6                            0</code></pre>
</div>
</div>
</section>
<section id="preview-the-data-1" class="slide level2">
<h2>Preview the data:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="fu">glimpse</span>(full_nuclear_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 253
Columns: 20
$ country_name                 &lt;chr&gt; "Algeria", "Argentina", "Argentina", "Arg…
$ ccode                        &lt;dbl&gt; 615, 160, 160, 160, 160, 900, 900, 211, 1…
$ facility_name                &lt;chr&gt; "Hot cell facility at Ain Oussera", "Ezei…
$ facility_ambiguity           &lt;dbl&gt; 0, 0, -77, 0, -77, 0, 0, 0, 0, 0, 0, 0, 0…
$ enr_type                     &lt;dbl&gt; 1, 1, 1, 2, 2, 3, 7, 1, 7, 3, 3, 3, 6, 1,…
$ size                         &lt;dbl&gt; 1, 1, 2, 2, 2, 1, 1, 2, 1, 2, 1, 3, 2, 1,…
$ construction_start           &lt;dbl&gt; 1986, 1968, 1978, 1979, 2000, 1965, 1982,…
$ construction_end             &lt;dbl&gt; 1992, 1968, 1990, 1987, 9999, 1972, 1992,…
$ operation_start              &lt;dbl&gt; 1992, 1968, 9999, 1987, 9999, 1972, 1992,…
$ operation_end                &lt;dbl&gt; 7777, 1973, 9999, 1994, 9999, 1983, 2007,…
$ operation2_start             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ operation2_end               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ covert                       &lt;dbl&gt; 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1,…
$ iaea                         &lt;dbl&gt; 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0,…
$ regional                     &lt;dbl&gt; 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 0,…
$ military                     &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1,…
$ military_ambiguity           &lt;dbl&gt; 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,…
$ multinational                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0,…
$ foreign_assistance           &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0,…
$ foreign_assistance_ambiguity &lt;dbl&gt; 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1,…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="co"># can also use: full_nuclear_data |&gt; glimpse() </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preview-the-data-2" class="slide level2">
<h2>Preview the data:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="co"># Look at the limited data:</span></span>
<span id="cb8-2"><a href=""></a><span class="fu">head</span>(nuclear_country_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  stateabb ccode year latency_lab latency_pilot
1      USA     2 1939           0             0
2      USA     2 1940           0             0
3      USA     2 1941           1             0
4      USA     2 1942           1             0
5      USA     2 1943           1             1
6      USA     2 1944           1             1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">glimpse</span>(nuclear_country_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 10,147
Columns: 5
$ stateabb      &lt;chr&gt; "USA", "USA", "USA", "USA", "USA", "USA", "USA", "USA", …
$ ccode         &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,…
$ year          &lt;dbl&gt; 1939, 1940, 1941, 1942, 1943, 1944, 1945, 1946, 1947, 19…
$ latency_lab   &lt;dbl&gt; 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ latency_pilot &lt;dbl&gt; 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</code></pre>
</div>
</div>
</section>
<section id="data-manipulation-and-wrangling" class="slide level2">
<h2>Data Manipulation and Wrangling:</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Data manipulation:</p>
<ul>
<li><p>Focus is changing data structure</p></li>
<li><p>Uses specific methods/functions</p></li>
<li><p>Works with structured data</p></li>
<li><p>Ex: sorting, filtering, aggregating</p></li>
<li><p>Part of data wrangling</p></li>
</ul>
</div><div class="column" style="width:50%;">
<p>Data wrangling:</p>
<ul>
<li><p>Broader process with cleaning and transformations</p></li>
<li><p>Structured and unstructured data</p></li>
<li><p>Missing values, multiple datasets, format conversion</p></li>
<li><p>More time intensive</p></li>
</ul>
</div></div>
</section>
<section id="more-advanced-data-wrangling" class="slide level2">
<h2>More advanced data wrangling:</h2>
<ul>
<li><p><strong>Advanced filtering and selection:</strong> Conditional filtering and dynamic column selection</p></li>
<li><p><strong>Complex mutate operations:</strong> Creating conditional columns using lags and leads</p></li>
<li><p><strong>Data reshaping:</strong> pivoting data, advanced grouping</p></li>
<li><p><strong>Efficient data handling:</strong> joining datasets, parallel processing</p></li>
</ul>
</section>
<section id="key-packages" class="slide level2">
<h2>Key Packages:</h2>
<p>These are tidyverse R packages that are used for data science, which share a common design philosophy, grammar, and data structures:</p>
<ul>
<li><p><code>ggplot2</code>: data visualization</p></li>
<li><p><code>dplyr</code>: data manipulation</p></li>
<li><p><code>tidyr</code>: data tidying</p></li>
<li><p><code>readr</code>: data import</p></li>
<li><p><code>purrr</code>: functional programming</p></li>
<li><p><code>tibble</code>: modern data frames</p></li>
<li><p><code>stringr</code>: string manipulation</p></li>
<li><p><code>forcats</code>: categorical data</p></li>
</ul>
</section>
<section id="most-commonly-used-dplyr-functions" class="slide level2">
<h2>Most commonly used <code>dplyr</code> functions:</h2>
<ul>
<li><code>filter()</code>: subset rows based on conditions</li>
</ul>
<div class="fragment">
<ul>
<li><code>select()</code>: choose columns by name</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><code>mutate()</code>: create new columns or modify existing ones
<ul>
<li>commonly used with <code>if_else()</code> or <code>case_when()</code></li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><code>arrange()</code>: reorder rows</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><code>group_by()</code>: group data for summary operations</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><code>summarize()</code>: aggregate data</li>
</ul>
</div>
</section>
<section id="return-to-the-data" class="slide level2">
<h2>Return to the data:</h2>
<p>Cleaning the data. If names were not clean, then we would clean the names, which you could do using the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">library</span>(janitor)</span>
<span id="cb12-2"><a href=""></a><span class="fu">head</span>(nuclear_country_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  stateabb ccode year latency_lab latency_pilot
1      USA     2 1939           0             0
2      USA     2 1940           0             0
3      USA     2 1941           1             0
4      USA     2 1942           1             0
5      USA     2 1943           1             1
6      USA     2 1944           1             1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="fu">head</span>(<span class="fu">clean_names</span>(nuclear_country_year))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  stateabb ccode year latency_lab latency_pilot
1      USA     2 1939           0             0
2      USA     2 1940           0             0
3      USA     2 1941           1             0
4      USA     2 1942           1             0
5      USA     2 1943           1             1
6      USA     2 1944           1             1</code></pre>
</div>
</div>
</section>
<section id="cleaning-a-few-things" class="slide level2">
<h2>Cleaning a few things:</h2>
<p>The codebook tells us that for many of the variables, there are values that are put in to signify missing values or non-operational facilities.</p>
<ul>
<li>It is very important to read through the codebook and look at summary stats of the data:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="fu">summary</span>(full_nuclear_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> country_name           ccode       facility_name      facility_ambiguity
 Length:253         Min.   :  2.0   Length:253         Min.   :-77.000   
 Class :character   1st Qu.:200.0   Class :character   1st Qu.:  0.000   
 Mode  :character   Median :360.0   Mode  :character   Median :  0.000   
                    Mean   :371.7                      Mean   : -3.474   
                    3rd Qu.:645.0                      3rd Qu.:  0.000   
                    Max.   :900.0                      Max.   :  1.000   
                                                                         
    enr_type          size      construction_start construction_end
 Min.   :1.000   Min.   :1.00   Min.   : -99       Min.   : -99    
 1st Qu.:1.000   1st Qu.:1.00   1st Qu.:1943       1st Qu.:1954    
 Median :2.000   Median :2.00   Median :1960       Median :1973    
 Mean   :2.621   Mean   :2.02   Mean   :1513       Mean   :2081    
 3rd Qu.:3.000   3rd Qu.:3.00   3rd Qu.:1982       3rd Qu.:1988    
 Max.   :8.000   Max.   :3.00   Max.   :2012       Max.   :9999    
                                                                   
 operation_start operation_end  operation2_start operation2_end
 Min.   : -99    Min.   : -99   Min.   :1969     Min.   :1972  
 1st Qu.:1956    1st Qu.:1978   1st Qu.:1981     1st Qu.:1988  
 Median :1974    Median :1993   Median :1983     Median :2004  
 Mean   :2328    Mean   :3993   Mean   :1988     Mean   :3919  
 3rd Qu.:1988    3rd Qu.:7777   3rd Qu.:1996     3rd Qu.:7777  
 Max.   :9999    Max.   :9999   Max.   :2011     Max.   :7777  
                                NA's   :244      NA's   :244   
     covert              iaea            regional           military       
 Min.   :-99.0000   Min.   :-99.000   Min.   :-99.0000   Min.   :-99.0000  
 1st Qu.:  0.0000   1st Qu.:  0.000   1st Qu.:  0.0000   1st Qu.:  0.0000  
 Median :  1.0000   Median :  0.000   Median :  0.0000   Median :  1.0000  
 Mean   : -0.2609   Mean   : -1.617   Mean   : -0.6087   Mean   : -0.9565  
 3rd Qu.:  1.0000   3rd Qu.:  1.000   3rd Qu.:  0.0000   3rd Qu.:  1.0000  
 Max.   :  1.0000   Max.   :  1.000   Max.   :  1.0000   Max.   :  1.0000  
                                                                           
 military_ambiguity multinational     foreign_assistance
 Min.   :0.0000     Min.   :0.00000   Min.   :-99.0000  
 1st Qu.:0.0000     1st Qu.:0.00000   1st Qu.:  0.0000  
 Median :0.0000     Median :0.00000   Median :  0.0000  
 Mean   :0.1897     Mean   :0.09091   Mean   : -0.1146  
 3rd Qu.:0.0000     3rd Qu.:0.00000   3rd Qu.:  1.0000  
 Max.   :1.0000     Max.   :1.00000   Max.   :  1.0000  
                                                        
 foreign_assistance_ambiguity
 Min.   :0.0000              
 1st Qu.:0.0000              
 Median :0.0000              
 Mean   :0.1028              
 3rd Qu.:0.0000              
 Max.   :1.0000              
                             </code></pre>
</div>
</div>
</section>
<section id="just-looking-at-specific-variables" class="slide level2">
<h2>Just looking at specific variables:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># just look at one variable:</span></span>
<span id="cb18-2"><a href=""></a><span class="fu">summary</span>(full_nuclear_data<span class="sc">$</span>military)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
-99.0000   0.0000   1.0000  -0.9565   1.0000   1.0000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="co"># look at multiple variables:</span></span>
<span id="cb20-2"><a href=""></a><span class="fu">summary</span>(full_nuclear_data <span class="sc">|&gt;</span> <span class="fu">select</span>(military, size))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    military             size     
 Min.   :-99.0000   Min.   :1.00  
 1st Qu.:  0.0000   1st Qu.:1.00  
 Median :  1.0000   Median :2.00  
 Mean   : -0.9565   Mean   :2.02  
 3rd Qu.:  1.0000   3rd Qu.:3.00  
 Max.   :  1.0000   Max.   :3.00  </code></pre>
</div>
</div>
</section>
<section id="tabulating-and-cross-tabbing-the-data" class="slide level2">
<h2>Tabulating and Cross-Tabbing the data:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="co"># tabulate technology employed at nuclear plant:</span></span>
<span id="cb22-2"><a href=""></a><span class="fu">table</span>(full_nuclear_data<span class="sc">$</span>enr_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   3   4   5   6   7   8 
112  26  67   7   7   7  23   4 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a><span class="co"># cross-table of technology employed based on civilian/military status:</span></span>
<span id="cb24-2"><a href=""></a><span class="fu">table</span>(full_nuclear_data<span class="sc">$</span>enr_type, full_nuclear_data<span class="sc">$</span>military)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
    -99  0  1
  1   2 44 66
  2   0  2 24
  3   2 27 38
  4   0  0  7
  5   0  2  5
  6   0  5  2
  7   0 15  8
  8   0  0  4</code></pre>
</div>
</div>
</section></section>
<section>
<section id="exercise" class="title-slide slide level1 center">
<h1>Exercise:</h1>

</section>
<section id="question-1-what-share-of-nuclear-and-plants-in-europe-are-military-as-opposed-to-civilian-what-share-broken-out-by-technology-type" class="slide level2">
<h2>Question 1: What share of nuclear and plants in Europe are military as opposed to civilian? What share broken out by technology type?</h2>
<p>What do we need to do?</p>
<div class="fragment">
<ol type="1">
<li>Filter to the countries of interest</li>
<li>Select the variables that are important to us</li>
<li>Handle missing/make sure the data is clean</li>
<li>Group by technology type/military status</li>
<li>Summarize</li>
</ol>
</div>
</section>
<section id="look-at-the-countries" class="slide level2">
<h2>Look at the countries:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="fu">table</span>(full_nuclear_data<span class="sc">$</span>country_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
       Algeria      Argentina      Australia        Belgium         Brazil 
             1              4              2              1              7 
        Canada          China Czech Republic          Egypt         France 
             3             18              1              1             24 
       Germany          India           Iran           Iraq         Israel 
             8             10             10              9              4 
         Italy          Japan          Libya    Netherlands    North Korea 
             4              9              3              5              3 
        Norway       Pakistan        Romania         Russia   South Africa 
             2              8              1             32              5 
   South Korea          Spain         Sweden         Taiwan United Kingdom 
             4              1              2              3             20 
 United States     Yugoslavia 
            44              4 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a><span class="co"># select just European countries:</span></span>
<span id="cb28-2"><a href=""></a>europe_nuclear_data <span class="ot">&lt;-</span> full_nuclear_data <span class="sc">|&gt;</span> </span>
<span id="cb28-3"><a href=""></a>  <span class="fu">filter</span>(country_name <span class="sc">%in%</span> </span>
<span id="cb28-4"><a href=""></a>           <span class="fu">c</span>(<span class="st">"Belgium"</span>, <span class="st">"Czech Republic"</span>, <span class="st">"France"</span>, <span class="st">"Germany"</span>,</span>
<span id="cb28-5"><a href=""></a>             <span class="st">"Italy"</span>, <span class="st">"Netherlands"</span>, <span class="st">"Norway"</span>, <span class="st">"Romania"</span>,</span>
<span id="cb28-6"><a href=""></a>             <span class="st">"Spain"</span>, <span class="st">"Sweden"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Yugoslavia"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="limit-to-the-variables-we-need" class="slide level2">
<h2>Limit to the variables we need:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a><span class="co"># subset to the variables that we need:</span></span>
<span id="cb29-2"><a href=""></a>europe_nuclear_data <span class="ot">&lt;-</span> europe_nuclear_data <span class="sc">|&gt;</span> </span>
<span id="cb29-3"><a href=""></a>  <span class="fu">select</span>(country_name, enr_type, military)</span>
<span id="cb29-4"><a href=""></a></span>
<span id="cb29-5"><a href=""></a><span class="co"># get summary stats of the dataframe:</span></span>
<span id="cb29-6"><a href=""></a><span class="fu">summary</span>(europe_nuclear_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> country_name          enr_type        military      
 Length:73          Min.   :1.000   Min.   :-99.000  
 Class :character   1st Qu.:1.000   1st Qu.:  0.000  
 Mode  :character   Median :1.000   Median :  0.000  
                    Mean   :2.082   Mean   : -2.301  
                    3rd Qu.:3.000   3rd Qu.:  1.000  
                    Max.   :7.000   Max.   :  1.000  </code></pre>
</div>
</div>
</section>
<section id="look-at-military" class="slide level2">
<h2>Look at military:</h2>
<p>We see that the share of military is negative if we look at summary stats. If we wanted to figure out the share that are military, right now, it wouldn’t make any sense.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a><span class="co"># recode the missing observaitons:</span></span>
<span id="cb31-2"><a href=""></a>military_summary_data <span class="ot">&lt;-</span> europe_nuclear_data <span class="sc">|&gt;</span> </span>
<span id="cb31-3"><a href=""></a>  <span class="co"># recode the missing military to be NA</span></span>
<span id="cb31-4"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">military =</span> <span class="fu">if_else</span>(military <span class="sc">==</span> <span class="sc">-</span><span class="dv">99</span>, <span class="cn">NA</span>, military))</span>
<span id="cb31-5"><a href=""></a></span>
<span id="cb31-6"><a href=""></a><span class="co"># look at the result:</span></span>
<span id="cb31-7"><a href=""></a><span class="fu">mean</span>(military_summary_data<span class="sc">$</span>military)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Why didn’t this work? We need to remove NAs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a><span class="fu">mean</span>(military_summary_data<span class="sc">$</span>military, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4225352</code></pre>
</div>
</div>
</section>
<section id="putting-it-all-together" class="slide level2">
<h2>Putting it all together</h2>
<p>How many military and civilian nuclear plants are there by power type?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a><span class="co"># compute the number and share of military plants by power type</span></span>
<span id="cb35-2"><a href=""></a>europe_power_type <span class="ot">&lt;-</span> europe_nuclear_data <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href=""></a>  <span class="co"># recode the missing to be NA:</span></span>
<span id="cb35-4"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">military =</span> <span class="fu">if_else</span>(military <span class="sc">==</span> <span class="sc">-</span><span class="dv">99</span>, <span class="cn">NA</span>, military)) <span class="sc">|&gt;</span></span>
<span id="cb35-5"><a href=""></a>  <span class="co"># remove the missings:</span></span>
<span id="cb35-6"><a href=""></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(military)) <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href=""></a>  <span class="co">#group by power type:</span></span>
<span id="cb35-8"><a href=""></a>  <span class="fu">group_by</span>(enr_type) <span class="sc">%&gt;%</span></span>
<span id="cb35-9"><a href=""></a>  <span class="co"># summarise the share of military</span></span>
<span id="cb35-10"><a href=""></a>  <span class="fu">summarise</span>(<span class="at">military =</span> <span class="fu">mean</span>(military), <span class="co"># the share of plants that are military</span></span>
<span id="cb35-11"><a href=""></a>            <span class="at">n_plants =</span> <span class="fu">n</span>()) <span class="co"># the total number of plants by type</span></span>
<span id="cb35-12"><a href=""></a></span>
<span id="cb35-13"><a href=""></a><span class="co"># look at the data:</span></span>
<span id="cb35-14"><a href=""></a>europe_power_type</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  enr_type military n_plants
     &lt;dbl&gt;    &lt;dbl&gt;    &lt;int&gt;
1        1   0.455        44
2        2   0.667         3
3        3   0.0769       13
4        4   1             2
5        5   1             4
6        6   0             2
7        7   0.333         3</code></pre>
</div>
</div>
</section>
<section id="make-it-look-a-little-cleaner" class="slide level2">
<h2>Make it look a little cleaner:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a><span class="co"># add strings to teh pwoer type</span></span>
<span id="cb37-2"><a href=""></a>europe_power_type  <span class="ot">&lt;-</span> europe_power_type <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href=""></a>  <span class="co"># create a variable with the name as a string instead of a number</span></span>
<span id="cb37-4"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">power_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb37-5"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Reprocessing"</span>,</span>
<span id="cb37-6"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Gaseous diffusion"</span>,</span>
<span id="cb37-7"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Centrifuge"</span>,</span>
<span id="cb37-8"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"EMIS"</span>,</span>
<span id="cb37-9"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Chemical &amp; ion exchange"</span>,</span>
<span id="cb37-10"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"Aerodynamic isotope separation"</span>,</span>
<span id="cb37-11"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">7</span> <span class="sc">~</span> <span class="st">"Laser"</span>,</span>
<span id="cb37-12"><a href=""></a>         enr_type <span class="sc">==</span> <span class="dv">8</span> <span class="sc">~</span> <span class="st">"Thermal diffusion"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb37-13"><a href=""></a>  <span class="co"># remove the number</span></span>
<span id="cb37-14"><a href=""></a>  <span class="fu">select</span>(<span class="sc">-</span>enr_type) <span class="sc">|&gt;</span></span>
<span id="cb37-15"><a href=""></a>  <span class="co"># sort by the number of plants (descending)</span></span>
<span id="cb37-16"><a href=""></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n_plants) <span class="sc">|&gt;</span></span>
<span id="cb37-17"><a href=""></a>  <span class="co"># make sure that power_type is the first variable:</span></span>
<span id="cb37-18"><a href=""></a>  <span class="fu">select</span>(power_type, <span class="fu">everything</span>())</span>
<span id="cb37-19"><a href=""></a></span>
<span id="cb37-20"><a href=""></a><span class="co"># look at the results:</span></span>
<span id="cb37-21"><a href=""></a>europe_power_type</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 3
  power_type                     military n_plants
  &lt;chr&gt;                             &lt;dbl&gt;    &lt;int&gt;
1 Reprocessing                     0.455        44
2 Centrifuge                       0.0769       13
3 Chemical &amp; ion exchange          1             4
4 Gaseous diffusion                0.667         3
5 Laser                            0.333         3
6 EMIS                             1             2
7 Aerodynamic isotope separation   0             2</code></pre>
</div>
</div>
</section>
<section id="recap" class="slide level2">
<h2>Recap:</h2>
<p>What have we done today?</p>
<ol type="1">
<li>Started to get familiar with R</li>
<li>Learned about good coding practices</li>
<li>Previewed the tidyverse</li>
<li>Work through a practice exercise</li>
</ol>
<p>Comment early and often!</p>
</section>
<section id="install-r-on-your-machine" class="slide level2">
<h2>Install R on Your Machine</h2>
<p><em>Please attempt this prior to the start of next lecture. If you successfully install R and RStudio without any issues, feel free to arrive at 9:15am on Thursday to allow us time to help other students</em></p>
<p>To install R, you should install both R and RStudio. To download and install R, you should click the following:</p>
<p><a href="https://posit.co/download/rstudio-desktop/"><strong>Download and Install R</strong></a></p>
<ul>
<li><p>Once you get to this website, click the <strong>“Download R for macOS” or “Download R for Windows</strong>” depending on your machine.</p></li>
<li><p>To get the R Studio interface, you can click on the same link as above and then click “<strong>Download RStudio Desktop</strong>.”</p></li>
</ul>
<p>If you would like step by step <em>instructions</em>, you can do so <a href="https://moderndive.com/1-getting-started.html">here</a>.</p>
<p>Please tell the teaching team if you need assistance!</p>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="lecture1_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="lecture1_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="lecture1_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="lecture1_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="lecture1_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="lecture1_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="lecture1_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="lecture1_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="lecture1_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="lecture1_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>